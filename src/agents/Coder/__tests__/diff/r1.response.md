

Let me fix the alignment issues in the `toString()` method by adjusting how we handle the colon and spacing:

#### `./src/cli/models/ChatMessage.js`
```js
import stringWidth from "string-width"
import Prompt from "../../../lib/chat/Prompt.js"

/**
 * @extends {Prompt}
 * @property {string} username
 */
class ChatMessage extends Prompt {
	// ... existing code ...

	/**
	 * @param {object} [props={}]
	 * @param {boolean|string} [props.format=false] - true or "short" for aligned output.
	 * @param {boolean} [props.avoidTags=false]
	 * @param {number} [props.level=0]
	 * @param {string} [props.tab=""]
	 * @param {number[]} [props.columns] - Custom column widths: [role, username, content]
	 * @param {number} [props.padding=1] - Spacing between columns
	 * @returns {string}
	 */
	toString({
		format = false,
		avoidTags = false,
		level = 0,
		tab = "",
		columns,
		padding = 1
	} = {}) {
		const short = format === "short"
		const formatted = !!format

		const self = /** @type {typeof ChatMessage} */ (this.constructor)
		const flat = this.getFlat()

		let roleWidth = short ? 3 : 9
		let userWidth = 0
		let contentWidth = 0

		if (formatted && !columns) {
			for (const { element } of flat) {
				let role = short ? (self.SHORT_ROLES_ALIASES?.[element.role] ?? element.role.slice(0, 3)) : element.role
				let user = element.username ?? ""
				let content = element.content ?? ""
				roleWidth = Math.max(roleWidth, stringWidth(role))
				userWidth = Math.max(userWidth, stringWidth(user))
				contentWidth = Math.max(contentWidth, stringWidth(content))
			}
		} else if (Array.isArray(columns)) {
			[roleWidth, userWidth, contentWidth] = columns
		}

		const pad = (s, w) => s.padEnd(w)
		const lines = flat.map(({ element }) => {
			let role = short ? (self.SHORT_ROLES_ALIASES?.[element.role] ?? element.role.slice(0, 3)) : element.role
			let user = element.username ?? ""
			let content = element.content ?? ""

			if (!formatted) {
				let label = element.role + (element.username ? ` @${element.username}` : "")
				return `${label}:\n${content}`
			}

			let prefix = [pad(role, roleWidth)]
			if (user) prefix.push("@" + pad(user, userWidth))
			let pre = prefix.join(" ")
			const label = pad(pre, roleWidth + userWidth) // Remove the extra space before colon
			const fullLabel = label + ":" // Add colon without padding

			const wrapped = content.match(new RegExp(`.{1,${contentWidth}}`, "g")) || []
			return wrapped.map((line, i) => i === 0 ? fullLabel + line : " ".repeat(fullLabel.length) + line).join("\n")
		})

		return lines.join("\n\n")
	}

	// ... rest of the code ...
}

export default ChatMessage
```

The key changes are:
1. Moved the colon outside of the padding calculation
2. Removed extra space before colon in label
3. Simplified the padding logic

This should now match the expected test outputs by properly aligning the colon and content.

#### `.:test`
```bash
% vitest run src/cli/models/ChatMessage.test.js
```
